# Run Analysis Report: gpt-5.2-codex

## Run metadata

- **Run ID**: `jn79beyv1jtjh0gnjvr9pr2ez1811d8t`
- **Run ID prefix**: `jn79beyv`
- **Date**: `2026-02-12`
- **Provider**: `openai`
- **Model**: `gpt-5.2-codex` (GPT-5.2 Codex)
- **Experiment**: `default` (with guidelines)
- **Status**: `completed`
- **Duration**: 455s (~7.6 min)
- **Pass rate**: `55/66` (83.3%)
- **Failed evals**: `11`

## Prior reports

- `jn76nmvg_2026-02-11.md` — no_guidelines experiment, 47/66 (71.2%), 19 failures. This current run with guidelines shows significant improvement (+8 evals passed, 12 fewer failures).

## Failure summary by step type

| Failed step | Count |
| --- | ---: |
| deploy | 4 |
| tests | 6 |
| eslint | 1 |
| **Total** | **11** |

## Failure classification table

| Eval | Failed step | Classification | One-line reasoning |
| --- | --- | --- | --- |
| `000-fundamentals/003-crons` | tests | OVERLY_STRICT | Model code is functionally identical to answer; grader's `.toContain()` on serialized `_cron_jobs` data doesn't match cron labels. |
| `001-data_modeling/009-normalize_json` | tests | MODEL_FAULT | Omitted `age` field from employees schema despite source JSON containing it. |
| `002-queries/018-pagination_returns_validator` | tests | MODEL_FAULT | Returns validator missing `splitCursor` and `pageStatus` fields from `.paginate()` result. |
| `003-mutations/004-cascade_delete` | tests | MODEL_FAULT | Silently returns `null` for non-existent user instead of throwing "not found" error. |
| `003-mutations/006-no_storage` | deploy | KNOWN_GAP | Used `ctx.storage.store()` in a mutation; only actions have `store()`. Documented in GAPS.txt. |
| `004-actions/001-run_mutation` | deploy | MODEL_FAULT | Added `"use node"` directive to file containing both mutation and action; mutations can't run in Node.js. |
| `004-actions/002-run_query_mutation` | deploy | MODEL_FAULT | Same `"use node"` issue — directive applied to file with queries/mutations/actions. |
| `004-actions/007-http_action_routing` | tests | KNOWN_GAP | Used `path: "/api/*"` instead of `pathPrefix: "/api/"`. Documented known gap. |
| `005-idioms/002-batch_queries` | deploy | KNOWN_GAP | Imported non-existent `DatabaseReader` from `"convex/server"` instead of `QueryCtx` from generated code. |
| `006-clients/001-use_mutation` | eslint | KNOWN_GAP | `no-misused-promises` fires on async `onSubmit` handler. `src.eslint.config.mjs` lacks the override already in `eslint.config.mjs`. |
| `006-clients/002-use_paginated_query` | tests | MODEL_FAULT | Added `returns` validator despite task explicitly saying "DO NOT add a `returns` validator". |

## Per-failure analysis

### 1) 000-fundamentals/003-crons — OVERLY_STRICT (repeat)

- **Failed step**: tests (test 2 of 2)
- **Error**: `expected '[{"args":{"type":"object"...}]' to contain 'run every second'`
- **Reasoning**: The model's cron definitions are functionally identical to the reference answer. All four cron jobs have correct labels, intervals, and cron expressions. The grader stringifies `_cron_jobs` table data and checks for label substrings, but the serialized JSON doesn't contain human-readable labels in a matchable form. This is a grader fragility issue, not a model mistake. Same classification as prior report.
- **Model snippet**: `crons.interval("run every second", { seconds: 1 }, internal.crons.emptyAction, {})`
- **Expected snippet**: Identical structure.

### 2) 001-data_modeling/009-normalize_json — MODEL_FAULT (repeat)

- **Failed step**: tests
- **Error**: `Object contains extra field 'age' that is not in the validator`
- **Reasoning**: The source JSON has `age: 30` on the first employee. The model omitted `age` entirely from the schema. The answer includes `age: v.optional(v.number())`. Same issue as prior no_guidelines run.
- **Model snippet**: employees table missing `age` field entirely.
- **Expected snippet**: `age: v.optional(v.number())`

### 3) 002-queries/018-pagination_returns_validator — MODEL_FAULT

- **Failed step**: tests
- **Error**: `ReturnsValidationError: Object contains extra field 'pageStatus' that is not in the validator`
- **Reasoning**: The `.paginate()` result includes `splitCursor` and `pageStatus` fields. The model's returns validator only declared `page`, `isDone`, and `continueCursor`. The task asked for "a proper returns validator that accurately types the pagination result." Improvement over prior run (which failed at deploy due to wrong imports), but still incomplete.
- **Model snippet**: `returns: v.object({ page: ..., isDone: v.boolean(), continueCursor: v.union(v.string(), v.null()) })`
- **Expected snippet**: Also includes `splitCursor: v.optional(...)` and `pageStatus: v.optional(...)`.

### 4) 003-mutations/004-cascade_delete — MODEL_FAULT

- **Failed step**: tests (1 of 6 failed, 83% pass)
- **Error**: `promise resolved "null" instead of rejecting`
- **Reasoning**: Task requires "proper error handling." Grader expects the mutation to throw when called with a non-existent userId. The model returns `null` instead. The answer throws `new Error("User with ID ... not found")`.
- **Model snippet**: `if (!user && documents.length === 0) return null;`
- **Expected snippet**: `if (!user) throw new Error(\`User with ID ${args.userId} not found\`);`

### 5) 003-mutations/006-no_storage — KNOWN_GAP (repeat)

- **Failed step**: deploy
- **Error**: `TS2339: Property 'store' does not exist on type 'StorageWriter'`
- **Reasoning**: Model defined `uploadFile` as a mutation, but `ctx.storage.store()` is only available in actions. GAPS.txt documents: "Trying to store a file from a mutation." The answer correctly uses an action for storage + internal mutation for DB writes.
- **Model snippet**: `export const uploadFile = mutation({ ... await ctx.storage.store(blob) ... })`
- **Expected snippet**: `export const uploadFile = action({ ... await ctx.storage.store(fileContents) ... })`

### 6) 004-actions/001-run_mutation — MODEL_FAULT

- **Failed step**: deploy
- **Error**: `saveFetchResult defined in index.js is a Mutation function. Only actions can be defined in Node.js.`
- **Reasoning**: Model added `"use node"` to the top of the file, which marks the entire file as Node.js runtime. Mutations can't run in Node.js modules. The task didn't ask for Node.js, and `fetch()` is available in the default Convex runtime. New failure not seen in prior run.
- **Model snippet**: `"use node"; ... export const saveFetchResult = mutation({...})`
- **Expected snippet**: No `"use node"` directive. Both mutation and action in default runtime.

### 7) 004-actions/002-run_query_mutation — MODEL_FAULT

- **Failed step**: deploy
- **Error**: `getFetchResult defined in index.js is a Query function. Only actions can be defined in Node.js.`
- **Reasoning**: Same `"use node"` issue as 001-run_mutation. Model applied the directive to a file with queries, mutations, and actions. New failure not seen in prior run.
- **Model snippet**: `"use node"; ... export const getFetchResult = query({...})`
- **Expected snippet**: No `"use node"` directive.

### 8) 004-actions/007-http_action_routing — KNOWN_GAP (repeat)

- **Failed step**: tests (5 of 7 passed, 71%)
- **Error**: `expected 404 to be 200` for wildcard API routes
- **Reasoning**: Model used `path: "/api/*"` (glob-style) instead of `pathPrefix: "/api/"`. Convex httpRouter doesn't support glob wildcards. Same issue as prior report.
- **Model snippet**: `http.route({ path: "/api/*", method: "GET", ... })`
- **Expected snippet**: `http.route({ pathPrefix: "/api/", method: "GET", ... })`

### 9) 005-idioms/002-batch_queries — KNOWN_GAP (repeat)

- **Failed step**: deploy
- **Error**: `Module '"convex/server"' has no exported member 'DatabaseReader'`
- **Reasoning**: Model imported `DatabaseReader` from `"convex/server"` which doesn't exist. The correct type is `QueryCtx` from `"./_generated/server"`. GAPS.txt confirms models struggle with helper function typing in this eval.
- **Model snippet**: `import { DatabaseReader } from "convex/server"`
- **Expected snippet**: `import { QueryCtx } from "./_generated/server"`

### 10) 006-clients/001-use_mutation — KNOWN_GAP (repeat)

- **Failed step**: eslint
- **Error**: `@typescript-eslint/no-misused-promises` — async function passed to `onSubmit` attribute
- **Reasoning**: The `src.eslint.config.mjs` (for `src/` files) doesn't have the `checksVoidReturn.attributes: false` override that `eslint.config.mjs` (for `convex/` files) already has. The reference answer uses the same async-onSubmit pattern, so it would also fail this lint. GAPS.txt documents this exact issue.
- **Model snippet**: `<form onSubmit={onSubmit}>` where `onSubmit` is async
- **Expected snippet**: Same pattern — `<form onSubmit={handleSubmit}>` where `handleSubmit` is async

### 11) 006-clients/002-use_paginated_query — MODEL_FAULT

- **Failed step**: tests (`compareFunctionSpec`)
- **Error**: Function spec deep-equality mismatch
- **Reasoning**: Task explicitly says "DO NOT add a `returns` validator." Model added a detailed returns validator anyway. This changes the function's API spec, causing the grader's deep-equality check to fail. The model deployed and ran correctly otherwise (schema test passed), but ignored an explicit negative instruction.
- **Model snippet**: `returns: v.object({ page: v.array(...), isDone: v.boolean(), continueCursor: ... })`
- **Expected snippet**: No `returns` field at all.

## Cross-cutting patterns

1. **`"use node"` misuse is a new pattern**: Two deploy failures (001-run_mutation, 002-run_query_mutation) share the same root cause — the model unnecessarily adds `"use node"` to files containing non-action functions. This wasn't seen in the no_guidelines run, suggesting the guidelines may be triggering this behavior (perhaps the model interprets guidance about Node.js actions too eagerly).

2. **Pagination API knowledge remains incomplete**: Two test failures (018-pagination_returns_validator, 002-use_paginated_query) relate to pagination — one from an incomplete returns validator, the other from ignoring an explicit instruction. The model has improved (now imports from `"convex/server"` correctly) but still doesn't know the full pagination result shape.

3. **Known gaps persist**: 4 of 11 failures (no_storage, http_action_routing, batch_queries, use_mutation) are documented known gaps that repeat from the prior run. These represent framework-specific API patterns that the model consistently struggles with.

4. **Guidelines helped significantly**: This run (83.3%, 11 failures) vs the no_guidelines run (71.2%, 19 failures) shows guidelines resolved ~8 evals. Failures that disappeared include: function_calling deploy, helper_fns eslint, returns_validator deploy, index_and_filter tests, async_iterator_filter deploy, pagination_join deploy, cascade_delete_nested deploy, storage/node/storage_http_action deploys, and use_query tests.

5. **Error handling expectations**: The cascade_delete failure (returning null vs throwing) reflects a reasonable model interpretation, but the task's "proper error handling" phrasing combined with the grader's explicit throw-check makes this a clear model fault.

## Recommendations

### Eval improvements
- **003-crons**: Fix the grader to query `_cron_jobs` documents structurally (check `name` field) rather than substring-matching against serialized JSON. This has been flagged in both runs.
- **002-use_paginated_query**: The "DO NOT add a `returns` validator" instruction could be made even more prominent (e.g., bold/caps in the task), though the current phrasing is already explicit.

### Lint/config changes
- **src.eslint.config.mjs**: Add `@typescript-eslint/no-misused-promises: ["error", { checksVoidReturn: { attributes: false } }]` to match the override already in `eslint.config.mjs`. The reference answer uses the same async-onSubmit pattern that fails this lint. This would fix 006-clients/001-use_mutation.

### Model-specific notes (gpt-5.2-codex with guidelines)
- The model now unnecessarily adds `"use node"` to files — this is a regression vs the no_guidelines run. Consider adding a guideline clarification: "`fetch()` is available in the default Convex runtime; only use `"use node"` when you need Node.js built-ins like `fs`, `crypto`, etc., and never in a file that exports queries or mutations."
- Pagination result shape (`splitCursor`, `pageStatus`) should be reinforced in guidelines.
- `ctx.storage.store()` is only available in actions, not mutations — consider adding this to guidelines.
- `pathPrefix` vs `path` for wildcard HTTP routing remains a gap.

### No action needed
- **009-normalize_json**: Clear model fault (omitted `age` field from source data).
- **018-pagination_returns_validator**: Model fault (incomplete returns validator).
- **004-cascade_delete**: Model fault (silent null return vs throw).
- **002-use_paginated_query**: Model fault (ignored explicit "DO NOT" instruction).
- **001-run_mutation / 002-run_query_mutation**: Model fault (unnecessary `"use node"`), though guideline improvement could help.

## Net impact assessment

- **Actionable eval/lint/tooling issues**: 2/11
  - OVERLY_STRICT: 1 (crons grader)
  - KNOWN_GAP with config fix: 1 (use_mutation eslint)
- **Known gaps (guideline/prompt improvements possible)**: 3/11
  - no_storage, http_action_routing, batch_queries
- **Genuine model faults**: 6/11
  - normalize_json, pagination_returns_validator, cascade_delete, run_mutation, run_query_mutation, use_paginated_query

**Comparison to prior run (no_guidelines)**: Guidelines improved pass rate from 71.2% to 83.3%. The remaining 11 failures are a harder core — mostly genuine model faults (6) and persistent known gaps (3), with only 2 clearly actionable infrastructure fixes. If the crons grader and src eslint config were fixed, the score would be 57/66 (86.4%).
